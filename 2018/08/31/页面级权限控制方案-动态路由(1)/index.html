<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://yoursite.com">
  <title>页面级权限控制方案-动态路由 | Cf-Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="通过动态路由控制页面级权限，不同权限的用户访问路由不一样">
<meta name="keywords" content="js">
<meta property="og:type" content="article">
<meta property="og:title" content="页面级权限控制方案-动态路由">
<meta property="og:url" content="http://yoursite.com/2018/08/31/页面级权限控制方案-动态路由(1)/index.html">
<meta property="og:site_name" content="Cf-Blog">
<meta property="og:description" content="通过动态路由控制页面级权限，不同权限的用户访问路由不一样">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-08-31T09:46:04.663Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="页面级权限控制方案-动态路由">
<meta name="twitter:description" content="通过动态路由控制页面级权限，不同权限的用户访问路由不一样">
  
    <link rel="alternative" href="/atom.xml" title="Cf-Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/assets/img/favicon.ico">
  
  <link rel="stylesheet" type="text/css" href="/./main.4a524f.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  
<script>
var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?a30844fa2bcbce0a9e001fe06cefeddf";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
</script>


</head>


  <body>
    <div id="container" q-class="show:isCtnShow">
      <canvas id="anm-canvas" class="anm-canvas"></canvas>
      <div class="left-col" q-class="show:isShow">
        
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/img/header.jpg" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">虾莫先生de球鞋</a></h1>
		</hgroup>
		
		<p class="header-subtitle">静可谓其道</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="https://xxm-cf.github.io/homepage/">个人作品集</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/XXM-cf" title="github"><i class="icon-github"></i></a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
		        
					<a class="google" target="_blank" href="#" title="google"><i class="icon-google"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

      </div>
      <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
        
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/img/header.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">虾莫先生de球鞋</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>静可谓其道<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/XXM-cf" title="github"><i class="icon-github"></i></a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu"><i class="icon-zhihu"></i></a>
			        
						<a class="google" target="_blank" href="#" title="google"><i class="icon-google"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="https://xxm-cf.github.io/homepage/">个人作品集</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

          <div id="wrapper" class="body-wrap">
            <div class="menu-l">
              <div class="canvas-wrap">
                <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
              </div>
              <div id="js-content" class="content-ll">
                <article id="post-页面级权限控制方案-动态路由(1)" class="article article-type-post "
  itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      页面级权限控制方案-动态路由
    </h1>
  

          
            <a href="/2018/08/31/页面级权限控制方案-动态路由(1)/" class="archive-article-date">
  	<time datetime="2018-08-31T09:47:17.205Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-08-31</time>
</a>

              
      </header>
      
        <div class="article-entry" itemprop="articleBody">
          
                    <p>通过动态路由控制页面级权限，不同权限的用户访问路由不一样<br><a id="more"></a></p>
<h3 id="什么是动态路由？"><a href="#什么是动态路由？" class="headerlink" title="什么是动态路由？"></a>什么是动态路由？</h3><p>即是根据用户的权限不同，动态生成路由规则的可访问路由。</p>
<h3 id="为什么要使用动态路由？"><a href="#为什么要使用动态路由？" class="headerlink" title="为什么要使用动态路由？"></a>为什么要使用动态路由？</h3><h4 id="一、原因："><a href="#一、原因：" class="headerlink" title="一、原因："></a>一、原因：</h4><ol>
<li>后台管理系统通常都有多种角色存在，每种角色都有不同的权限；</li>
<li>根据用户的权限不同，动态生成路由规则，可以让每个用户看到不同的导航菜单。</li>
</ol>
<h4 id="二、需求："><a href="#二、需求：" class="headerlink" title="二、需求："></a>二、需求：</h4><ol>
<li>用户权限不同，看到的导航菜单也不同；</li>
<li>用户直接输入url路径试图访问没有权限或不存在的页面将会跳转到404页面；</li>
</ol>
<h4 id="三、主要利用到的技术"><a href="#三、主要利用到的技术" class="headerlink" title="三、主要利用到的技术"></a>三、主要利用到的技术</h4><p>router.addRoutes，可动态添加路由规则</p>
<h3 id="动态路由的实现？"><a href="#动态路由的实现？" class="headerlink" title="动态路由的实现？"></a>动态路由的实现？</h3><h4 id="一、思路"><a href="#一、思路" class="headerlink" title="一、思路"></a>一、思路</h4><ol>
<li>路由文件包含全部路由（分为公共基础路由publicRouter与导航路由navRouter）、并有权限字段设置；</li>
<li>登录获取到权限表authorities，根据权限表与路由权限字段authority匹配，匹配的路由处理为新路由规则addRouters；</li>
<li>新的路由规则添加到router中；</li>
<li>根据新的路由规则渲染导航菜单。</li>
</ol>
<h4 id="二、路由文件router-js的设置"><a href="#二、路由文件router-js的设置" class="headerlink" title="二、路由文件router.js的设置"></a>二、路由文件router.js的设置</h4><ol>
<li>路由文件分割为公共基础路由publicRouter跟导航路由navRoute <br><br>publicRouter为基础路由，与权限无关，每个用户都含有。通常包括：根路径（/）设置、home路由与登录路由。<br><br>navRouter为动态导航路由，包含全部与权限控制相关的路由，显示在导航菜单栏。<br><br>注：404路由虽然为公共路由，但需要放到路由规则的最后面。</li>
<li>具体代码如下</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'@/views/home/index.vue'</span></span><br><span class="line"><span class="keyword">import</span> Login <span class="keyword">from</span> <span class="string">'@/views/login/index.vue'</span></span><br><span class="line"><span class="keyword">import</span> Error404 <span class="keyword">from</span> <span class="string">'@/views/error/404'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 布局页面</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'@/components/layout/index.vue'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 欢迎页</span></span><br><span class="line"><span class="keyword">const</span> Welcome = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/welcome/welcome.vue'</span>)</span><br><span class="line"><span class="comment">// demo</span></span><br><span class="line"><span class="keyword">const</span> DemoCard = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/demo/card.vue'</span>)</span><br><span class="line"><span class="comment">// 运营总览</span></span><br><span class="line"><span class="keyword">const</span> Survey = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/survey/survey.vue'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 公共基础路由</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> publicRouter = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/'</span>,</span><br><span class="line">    redirect: <span class="string">'/home'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/home'</span>,</span><br><span class="line">    name: <span class="string">'Home'</span>,</span><br><span class="line">    component: Home</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/login'</span>,</span><br><span class="line">    name: <span class="string">'login'</span>,</span><br><span class="line">    component: Login</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  auth: <span class="literal">true</span>,</span><br><span class="line">  routes: publicRouter</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 动态nav路由, 显示在菜单栏</span></span><br><span class="line"><span class="comment">* icon: 路由icon图标</span></span><br><span class="line"><span class="comment">* authority: 访问路由所需权限, Array</span></span><br><span class="line"><span class="comment">* keepAlivePath: 菜单栏高亮路由</span></span><br><span class="line"><span class="comment">* hide: 是否隐藏子路由</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> navRouter = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/welcome'</span>,</span><br><span class="line">    redirect: <span class="string">'/welcome'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      icon: <span class="string">'iconfont icon-zhuye'</span></span><br><span class="line">      <span class="comment">// authority: [''],</span></span><br><span class="line">      <span class="comment">// keepAlivePath: '/welcome'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">''</span>,</span><br><span class="line">        name: <span class="string">'Welcome'</span>,</span><br><span class="line">        component: Welcome,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: <span class="string">'欢迎'</span></span><br><span class="line">          <span class="comment">// hide: false</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/demo'</span>,</span><br><span class="line">    redirect: <span class="string">'/demo/card'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      title: <span class="string">'组件'</span>,</span><br><span class="line">      icon: <span class="string">'iconfont icon-shebeidilifenbu'</span>,</span><br><span class="line">      children: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">'card'</span>,</span><br><span class="line">        name: <span class="string">'DemoCard'</span>,</span><br><span class="line">        component: DemoCard,</span><br><span class="line">        meta: &#123; <span class="attr">title</span>: <span class="string">'卡片组件'</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'/survey'</span>,</span><br><span class="line">    redirect: <span class="string">'/survey'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      icon: <span class="string">'iconfont icon-baobiaotongji'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">''</span>,</span><br><span class="line">        name: <span class="string">'Survey'</span>,</span><br><span class="line">        component: Survey,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: <span class="string">'运营总览'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: <span class="string">'*'</span>,</span><br><span class="line">    redirect: <span class="string">'/404'</span>,</span><br><span class="line">    component: Layout,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      icon: <span class="string">''</span>,</span><br><span class="line">      hide: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: <span class="string">''</span>,</span><br><span class="line">        name: <span class="string">'Error404'</span>,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: <span class="string">'404页面'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        component: Error404</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="三、vuex管理的路由模块route-js的设置"><a href="#三、vuex管理的路由模块route-js的设置" class="headerlink" title="三、vuex管理的路由模块route.js的设置"></a>三、vuex管理的路由模块route.js的设置</h4><ol>
<li>route.js是匹配路由规则，生成动态路由的文件。<br><br>生成的全部路由将会被addRoutes到router中，并会在导航菜单渲染中使用</li>
<li>具体代码如下</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; navRouter, publicRouter &#125; <span class="keyword">from</span> <span class="string">'@/router/index'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否有权限</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasPermission</span> (<span class="params">roles, route</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (route.meta &amp;&amp; route.meta.authority) &#123;</span><br><span class="line">    <span class="keyword">return</span> roles.some(<span class="function"><span class="params">role</span> =&gt;</span> route.meta.authority.includes(role))</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 过滤路由</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterAsyncRouter</span> (<span class="params">navRouter, roles</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> accessedRouters = navRouter.filter(<span class="function"><span class="params">route</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (hasPermission(roles, route)) &#123;</span><br><span class="line">      <span class="keyword">if</span> (route.children &amp;&amp; route.children.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        route.children = filterAsyncRouter(route.children, roles)</span><br><span class="line">        <span class="keyword">if</span> (route.redirect &amp;&amp; route.children[<span class="number">0</span>].path) &#123;</span><br><span class="line">          route.redirect = route.path + <span class="string">'/'</span> + route.children[<span class="number">0</span>].path</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> accessedRouters</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> route = &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    addRouters: [], <span class="comment">// 动态路由</span></span><br><span class="line">    routers: [] <span class="comment">// 全部路由</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    SET_ROUTERS: <span class="function">(<span class="params">state, routers</span>) =&gt;</span> &#123;</span><br><span class="line">      state.addRouters = routers</span><br><span class="line">      state.routers = publicRouter.concat(routers)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    GenerateRoutes: <span class="function">(<span class="params">&#123; commit &#125;, &#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> accessedRouters = filterAsyncRouter(navRouter, data)</span><br><span class="line">        commit(<span class="string">'SET_ROUTERS'</span>, accessedRouters)</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> route</span><br></pre></td></tr></table></figure>
<p>3、为了方便调用，也是放到vuex的getters中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="comment">// token</span></span><br><span class="line">  token: <span class="function">(<span class="params">&#123; user &#125;</span>) =&gt;</span> user.token,</span><br><span class="line">  <span class="comment">// 权限表</span></span><br><span class="line">  authorities: <span class="function">(<span class="params">&#123; user &#125;</span>) =&gt;</span> user.authorities,</span><br><span class="line">  <span class="comment">// 用户信息</span></span><br><span class="line">  userInfo: <span class="function">(<span class="params">&#123; user &#125;</span>) =&gt;</span> user.userInfo || &#123;&#125;,</span><br><span class="line">  <span class="comment">// 动态路由</span></span><br><span class="line">  addRouters: <span class="function">(<span class="params">&#123; route &#125;</span>) =&gt;</span> route.addRouters</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br></pre></td></tr></table></figure>
<h4 id="四、全局路由拦截permission-js的设置"><a href="#四、全局路由拦截permission-js的设置" class="headerlink" title="四、全局路由拦截permission.js的设置"></a>四、全局路由拦截permission.js的设置</h4><ol>
<li>该拦截可实现登录后与强制刷新浏览器都会重新获取self接口，重新设置动态路由。<br><br>在此处，需要把匹配好的动态路由通过addRouters添加到router中。</li>
<li>具体代码如下</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@/router/index'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span></span><br><span class="line"><span class="keyword">import</span> NProgress <span class="keyword">from</span> <span class="string">'nprogress'</span> <span class="comment">// Progress 进度条</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'nprogress/nprogress.css'</span><span class="comment">// Progress 进度条样式</span></span><br><span class="line"><span class="keyword">import</span> &#123; Message &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line"><span class="keyword">import</span> &#123; getToken, removeToken &#125; <span class="keyword">from</span> <span class="string">'@/assets/utils/auth'</span> <span class="comment">// 验权</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">'/login'</span>] <span class="comment">// 不重定向白名单</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  NProgress.start()</span><br><span class="line">  <span class="keyword">let</span> remember = <span class="built_in">JSON</span>.parse(getToken(<span class="literal">true</span>))</span><br><span class="line">  <span class="keyword">let</span> token = getToken(<span class="literal">false</span>, remember)</span><br><span class="line">  <span class="keyword">if</span> (token) &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.path === <span class="string">'/login'</span>) &#123;</span><br><span class="line">      next(&#123; <span class="attr">path</span>: <span class="string">'/'</span> &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (store &amp;&amp; store.getters.addRouters.length === <span class="number">0</span>) &#123;</span><br><span class="line">        store.dispatch(<span class="string">'GetInfo'</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="comment">// 拉取用户信息</span></span><br><span class="line">          <span class="keyword">let</span> data = store.getters.authorities</span><br><span class="line">          store.dispatch(<span class="string">'GenerateRoutes'</span>, &#123; data &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="comment">// 根据roles权限生成可访问的路由表</span></span><br><span class="line">            router.addRoutes(store.getters.addRouters) <span class="comment">// 动态添加可访问路由表</span></span><br><span class="line">            <span class="keyword">if</span> (data &amp;&amp; data.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">              next(&#123; ...to, <span class="attr">replace</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              Message.error(<span class="string">'账号异常'</span>)</span><br><span class="line">              removeToken()</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">          store.dispatch(<span class="string">'LogOut'</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            next(&#123; <span class="attr">path</span>: <span class="string">'/login'</span> &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next()</span><br><span class="line">        NProgress.done()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (whiteList.indexOf(to.path) !== <span class="number">-1</span>) &#123;</span><br><span class="line">      next()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next(<span class="string">'/login'</span>)</span><br><span class="line">      NProgress.done()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.afterEach(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  NProgress.done() <span class="comment">// 结束Progress</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="五、home页的设置"><a href="#五、home页的设置" class="headerlink" title="五、home页的设置"></a>五、home页的设置</h4><p>目的：</p>
<ol>
<li>home页作为登录后的loading页；</li>
<li>根路径会默认重定向到该页面；</li>
<li>进入到home页后，会跳转到动态路由的第一个路由页面。<br>具体代码如下：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">lang</span>=<span class="string">"pug"</span>&gt;</span></span><br><span class="line">  .home-page</span><br><span class="line">    i.el-icon-loading</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;mapState&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'Home'</span>,</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="javascript">    ...mapState([<span class="string">'route'</span>])</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  mounted () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> toRouter = <span class="keyword">this</span>.route.addRouters[<span class="number">0</span>].path</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.$router.push(toRouter)</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;&#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.home-page</span>&#123;</span></span><br><span class="line"><span class="undefined">  width: 100%;</span></span><br><span class="line"><span class="undefined">  height: 100%;</span></span><br><span class="line"><span class="undefined">  display: flex;</span></span><br><span class="line"><span class="undefined">  justify-content: center;</span></span><br><span class="line"><span class="undefined">  align-items: center;</span></span><br><span class="line"><span class="undefined">  font-size: 80px;</span></span><br><span class="line"><span class="undefined">  color: $success;</span></span><br><span class="line"><span class="undefined">  background: url('~@/assets/images/login-bg.png') no-repeat center center / cover;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="六、导航菜单的设置："><a href="#六、导航菜单的设置：" class="headerlink" title="六、导航菜单的设置："></a>六、导航菜单的设置：</h4><ol>
<li>导航菜单利用element-ui的el-menu组件实现；<br><br>主要需要考虑的是菜单栏的高亮问题，强制刷新浏览器，登录后第一次进入，切花页面。高亮状态的保持与更替需要有仔细的考虑与验证。</li>
<li>具体代码如下：</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">lang</span>=<span class="string">"pug"</span>&gt;</span></span><br><span class="line">  .app-nav</span><br><span class="line">    el-menu(ref="navMenu",:default-active="activeIndex", mode="horizontal", @open="handleOpen", @close="handleClose",</span><br><span class="line">      @select="selectHandle", :unique-opened="true", :collapse-transition="false")</span><br><span class="line">      template(v-for="item in list", v-if="item.show")</span><br><span class="line">        el-menu-item(v-if="!item.children", :index="item.path")</span><br><span class="line">          i(:class="item.icon")</span><br><span class="line">          span(slot="title") &#123;&#123;item.title&#125;&#125;</span><br><span class="line">        el-submenu(v-else, :index="item.path", :popper-append-to-body="false", ref="submenu", popper-class="hekr-submenu",</span><br><span class="line">          :hide-timeout="0", :show-timeout="0")</span><br><span class="line">          template(slot="title")</span><br><span class="line">            i(:class="item.icon")</span><br><span class="line">            span(slot="title") &#123;&#123;item.title&#125;&#125;</span><br><span class="line">          template(v-for="sub in item.subList")</span><br><span class="line">            el-menu-item(:index="sub.path", v-show="sub.show")</span><br><span class="line">              i(:class="sub.icon")</span><br><span class="line">              span &#123;&#123;sub.title&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123;mapState&#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">'AppNav'</span>,</span></span><br><span class="line"><span class="undefined">  data () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      activeIndex: <span class="keyword">this</span>.defaultActiveIndex</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  computed: &#123;</span></span><br><span class="line"><span class="javascript">    ...mapState([<span class="string">'user'</span>, <span class="string">'route'</span>]),</span></span><br><span class="line"><span class="undefined">    defaultActiveIndex () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.$route.meta.keepAlivePath ? <span class="keyword">this</span>.$route.meta.keepAlivePath : <span class="keyword">this</span>.$route.path</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    list () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> router = <span class="keyword">this</span>.route.addRouters</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> router.map(<span class="function"><span class="params">r</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> path = r.redirect</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> icon = r.meta.icon</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> title = r.meta.title || r.children[<span class="number">0</span>].meta.title</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> children = r.meta.children</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> subList = []</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> show = !r.meta.hide</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (children) &#123;</span></span><br><span class="line"><span class="javascript">          r.children.map(<span class="function"><span class="params">s</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined">            subList.push(&#123;</span></span><br><span class="line"><span class="javascript">              path: <span class="string">`<span class="subst">$&#123;r.path&#125;</span>/<span class="subst">$&#123;s.path&#125;</span>`</span>,</span></span><br><span class="line"><span class="undefined">              icon: s.meta.icon,</span></span><br><span class="line"><span class="undefined">              title: s.meta.title,</span></span><br><span class="line"><span class="undefined">              show: !s.meta.hide</span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="undefined">          &#125;)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> &#123;path, icon, title, children, show, subList &#125;</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  mounted () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.activeIndex = <span class="keyword">this</span>.defaultActiveIndex</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  watch: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="string">'$route'</span> (to, <span class="keyword">from</span>) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.activeIndex = <span class="keyword">this</span>.defaultActiveIndex</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;,</span></span><br><span class="line"><span class="undefined">  methods: &#123;</span></span><br><span class="line"><span class="undefined">    handleOpen (index, path) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$router.push(index)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$refs.navMenu.activeIndex = index</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.closeSubmenu(index)</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    handleClose (index, path) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.closeSubmenu(index)</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    selectHandle (index, path) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (index !== <span class="keyword">this</span>.$route.path) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">this</span>.$router.push(index)</span></span><br><span class="line"><span class="javascript">          <span class="keyword">this</span>.closeSubmenu(index)</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="comment">// 关闭子菜单</span></span></span><br><span class="line"><span class="undefined">    closeSubmenu (index) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.$refs.navMenu.close(index)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"scss"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

                      

                        
    </div>
    <div class="article-info article-info-index">
      
          
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">js</a>
        		</li>
      		
		</ul>
	</div>

            

              

                  
                    
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="http://s.jiathis.com/qrcode.php?url=http://yoursite.com/2018/08/31/页面级权限控制方案-动态路由(1)/" alt="微信分享二维码">
    </div>
</div>

<div class="mask js-mask"></div>
                      
                        <div class="clearfix"></div>
    </div>
    </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2018/08/31/按钮级权限控制方案-自定义指令v-auth(1)/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          按钮级权限控制方案-自定义指令v-auth
        
      </div>
    </a>
  
  
    <a href="/2018/05/31/rem.js/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">rem.js</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>

    

      

            
              
                <div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="页面级权限控制方案-动态路由(1)" data-title="页面级权限控制方案-动态路由" data-url="http://yoursite.com/2018/08/31/页面级权限控制方案-动态路由(1)/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"litten-hexo"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>

                  
                      
                        <!-- 目录内容 -->
                        
                            <!-- 目录内容结束 -->
                            

                                <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
                                <script src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
                                <script>
                                  hljs.initHighlightingOnLoad();

                                </script>

              </div>
            </div>
          </div>
          <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 虾莫先生de球鞋
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
      </div>
      <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>
  ! function (t) {
    function n(r) {
      if (e[r]) return e[r].exports;
      var o = e[r] = {
        exports: {},
        id: r,
        loaded: !1
      };
      return t[r].call(o.exports, o, o.exports, n), o.loaded = !0, o.exports
    }
    var e = {};
    return n.m = t, n.c = e, n.p = "./", n(0)
  }([function (t, n, e) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        default: t
      }
    }

    function o(t, n) {
      var e = /\/|index.html/g;
      return t.replace(e, "") === n.replace(e, "")
    }

    function i() {
      for (var t = document.querySelectorAll(".js-header-menu li a"), n = window.location.pathname, e = 0, r = t.length; e <
        r; e++) {
        var i = t[e];
        o(n, i.getAttribute("href")) && (0, d.default)(i, "active")
      }
    }

    function u(t) {
      for (var n = t.offsetLeft, e = t.offsetParent; null !== e;) n += e.offsetLeft, e = e.offsetParent;
      return n
    }

    function f(t) {
      for (var n = t.offsetTop, e = t.offsetParent; null !== e;) n += e.offsetTop, e = e.offsetParent;
      return n
    }

    function c(t, n, e, r, o) {
      var i = u(t),
        c = f(t) - n;
      if (c - e <= o) {
        var a = t.$newDom;
        a || (a = t.cloneNode(!0), (0, h.default)(t, a), t.$newDom = a, a.style.position = "fixed", a.style.top = (
            e || c) + "px", a.style.left = i + "px", a.style.zIndex = r || 2, a.style.width = "100%", a.style.color =
          "#fff"), a.style.visibility = "visible", t.style.visibility = "hidden"
      } else {
        t.style.visibility = "visible";
        var s = t.$newDom;
        s && (s.style.visibility = "hidden")
      }
    }

    function a() {
      var t = document.querySelector(".js-overlay"),
        n = document.querySelector(".js-header-menu");
      c(t, document.body.scrollTop, -63, 2, 0), c(n, document.body.scrollTop, 1, 3, 0)
    }

    function s() {
      document.querySelector("#container").addEventListener("scroll", function (t) {
        a()
      }), window.addEventListener("scroll", function (t) {
        a()
      }), a()
    }

    function l() {
      x.default.versions.mobile && window.screen.width < 800 && (i(), s())
    }
    var p = e(71),
      d = r(p),
      v = e(72),
      y = (r(v), e(84)),
      h = r(y),
      b = e(69),
      x = r(b),
      m = e(75),
      g = r(m),
      w = e(70);
    l(), (0, w.addLoadEvent)(function () {
      g.default.init()
    }), t.exports = {}
  }, function (t, n) {
    var e = t.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self &&
      self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = e)
  }, function (t, n) {
    var e = {}.hasOwnProperty;
    t.exports = function (t, n) {
      return e.call(t, n)
    }
  }, function (t, n, e) {
    var r = e(49),
      o = e(15);
    t.exports = function (t) {
      return r(o(t))
    }
  }, function (t, n, e) {
    t.exports = !e(8)(function () {
      return 7 != Object.defineProperty({}, "a", {
        get: function () {
          return 7
        }
      }).a
    })
  }, function (t, n, e) {
    var r = e(6),
      o = e(12);
    t.exports = e(4) ? function (t, n, e) {
      return r.f(t, n, o(1, e))
    } : function (t, n, e) {
      return t[n] = e, t
    }
  }, function (t, n, e) {
    var r = e(10),
      o = e(30),
      i = e(24),
      u = Object.defineProperty;
    n.f = e(4) ? Object.defineProperty : function (t, n, e) {
      if (r(t), n = i(n, !0), r(e), o) try {
        return u(t, n, e)
      } catch (t) {}
      if ("get" in e || "set" in e) throw TypeError("Accessors not supported!");
      return "value" in e && (t[n] = e.value), t
    }
  }, function (t, n, e) {
    var r = e(22)("wks"),
      o = e(13),
      i = e(1).Symbol,
      u = "function" == typeof i,
      f = t.exports = function (t) {
        return r[t] || (r[t] = u && i[t] || (u ? i : o)("Symbol." + t))
      };
    f.store = r
  }, function (t, n) {
    t.exports = function (t) {
      try {
        return !!t()
      } catch (t) {
        return !0
      }
    }
  }, function (t, n, e) {
    var r = e(35),
      o = e(16);
    t.exports = Object.keys || function (t) {
      return r(t, o)
    }
  }, function (t, n, e) {
    var r = e(11);
    t.exports = function (t) {
      if (!r(t)) throw TypeError(t + " is not an object!");
      return t
    }
  }, function (t, n) {
    t.exports = function (t) {
      return "object" == typeof t ? null !== t : "function" == typeof t
    }
  }, function (t, n) {
    t.exports = function (t, n) {
      return {
        enumerable: !(1 & t),
        configurable: !(2 & t),
        writable: !(4 & t),
        value: n
      }
    }
  }, function (t, n) {
    var e = 0,
      r = Math.random();
    t.exports = function (t) {
      return "Symbol(".concat(void 0 === t ? "" : t, ")_", (++e + r).toString(36))
    }
  }, function (t, n) {
    var e = t.exports = {
      version: "2.4.0"
    };
    "number" == typeof __e && (__e = e)
  }, function (t, n) {
    t.exports = function (t) {
      if (void 0 == t) throw TypeError("Can't call method on  " + t);
      return t
    }
  }, function (t, n) {
    t.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(
      ",")
  }, function (t, n) {
    t.exports = {}
  }, function (t, n) {
    t.exports = !0
  }, function (t, n) {
    n.f = {}.propertyIsEnumerable
  }, function (t, n, e) {
    var r = e(6).f,
      o = e(2),
      i = e(7)("toStringTag");
    t.exports = function (t, n, e) {
      t && !o(t = e ? t : t.prototype, i) && r(t, i, {
        configurable: !0,
        value: n
      })
    }
  }, function (t, n, e) {
    var r = e(22)("keys"),
      o = e(13);
    t.exports = function (t) {
      return r[t] || (r[t] = o(t))
    }
  }, function (t, n, e) {
    var r = e(1),
      o = "__core-js_shared__",
      i = r[o] || (r[o] = {});
    t.exports = function (t) {
      return i[t] || (i[t] = {})
    }
  }, function (t, n) {
    var e = Math.ceil,
      r = Math.floor;
    t.exports = function (t) {
      return isNaN(t = +t) ? 0 : (t > 0 ? r : e)(t)
    }
  }, function (t, n, e) {
    var r = e(11);
    t.exports = function (t, n) {
      if (!r(t)) return t;
      var e, o;
      if (n && "function" == typeof (e = t.toString) && !r(o = e.call(t))) return o;
      if ("function" == typeof (e = t.valueOf) && !r(o = e.call(t))) return o;
      if (!n && "function" == typeof (e = t.toString) && !r(o = e.call(t))) return o;
      throw TypeError("Can't convert object to primitive value")
    }
  }, function (t, n, e) {
    var r = e(1),
      o = e(14),
      i = e(18),
      u = e(26),
      f = e(6).f;
    t.exports = function (t) {
      var n = o.Symbol || (o.Symbol = i ? {} : r.Symbol || {});
      "_" == t.charAt(0) || t in n || f(n, t, {
        value: u.f(t)
      })
    }
  }, function (t, n, e) {
    n.f = e(7)
  }, function (t, n, e) {
    var r = e(1),
      o = e(14),
      i = e(46),
      u = e(5),
      f = "prototype",
      c = function (t, n, e) {
        var a, s, l, p = t & c.F,
          d = t & c.G,
          v = t & c.S,
          y = t & c.P,
          h = t & c.B,
          b = t & c.W,
          x = d ? o : o[n] || (o[n] = {}),
          m = x[f],
          g = d ? r : v ? r[n] : (r[n] || {})[f];
        d && (e = n);
        for (a in e) s = !p && g && void 0 !== g[a], s && a in x || (l = s ? g[a] : e[a], x[a] = d && "function" !=
          typeof g[a] ? e[a] : h && s ? i(l, r) : b && g[a] == l ? function (t) {
            var n = function (n, e, r) {
              if (this instanceof t) {
                switch (arguments.length) {
                  case 0:
                    return new t;
                  case 1:
                    return new t(n);
                  case 2:
                    return new t(n, e)
                }
                return new t(n, e, r)
              }
              return t.apply(this, arguments)
            };
            return n[f] = t[f], n
          }(l) : y && "function" == typeof l ? i(Function.call, l) : l, y && ((x.virtual || (x.virtual = {}))[a] =
            l, t & c.R && m && !m[a] && u(m, a, l)))
      };
    c.F = 1, c.G = 2, c.S = 4, c.P = 8, c.B = 16, c.W = 32, c.U = 64, c.R = 128, t.exports = c
  }, function (t, n) {
    var e = {}.toString;
    t.exports = function (t) {
      return e.call(t).slice(8, -1)
    }
  }, function (t, n, e) {
    var r = e(11),
      o = e(1).document,
      i = r(o) && r(o.createElement);
    t.exports = function (t) {
      return i ? o.createElement(t) : {}
    }
  }, function (t, n, e) {
    t.exports = !e(4) && !e(8)(function () {
      return 7 != Object.defineProperty(e(29)("div"), "a", {
        get: function () {
          return 7
        }
      }).a
    })
  }, function (t, n, e) {
    "use strict";
    var r = e(18),
      o = e(27),
      i = e(36),
      u = e(5),
      f = e(2),
      c = e(17),
      a = e(51),
      s = e(20),
      l = e(58),
      p = e(7)("iterator"),
      d = !([].keys && "next" in [].keys()),
      v = "@@iterator",
      y = "keys",
      h = "values",
      b = function () {
        return this
      };
    t.exports = function (t, n, e, x, m, g, w) {
      a(e, n, x);
      var O, S, _, j = function (t) {
          if (!d && t in A) return A[t];
          switch (t) {
            case y:
              return function () {
                return new e(this, t)
              };
            case h:
              return function () {
                return new e(this, t)
              }
          }
          return function () {
            return new e(this, t)
          }
        },
        P = n + " Iterator",
        E = m == h,
        M = !1,
        A = t.prototype,
        T = A[p] || A[v] || m && A[m],
        L = T || j(m),
        N = m ? E ? j("entries") : L : void 0,
        C = "Array" == n ? A.entries || T : T;
      if (C && (_ = l(C.call(new t)), _ !== Object.prototype && (s(_, P, !0), r || f(_, p) || u(_, p, b))), E &&
        T && T.name !== h && (M = !0, L = function () {
          return T.call(this)
        }), r && !w || !d && !M && A[p] || u(A, p, L), c[n] = L, c[P] = b, m)
        if (O = {
            values: E ? L : j(h),
            keys: g ? L : j(y),
            entries: N
          }, w)
          for (S in O) S in A || i(A, S, O[S]);
        else o(o.P + o.F * (d || M), n, O);
      return O
    }
  }, function (t, n, e) {
    var r = e(10),
      o = e(55),
      i = e(16),
      u = e(21)("IE_PROTO"),
      f = function () {},
      c = "prototype",
      a = function () {
        var t, n = e(29)("iframe"),
          r = i.length,
          o = "<",
          u = ">";
        for (n.style.display = "none", e(48).appendChild(n), n.src = "javascript:", t = n.contentWindow.document, t
          .open(), t.write(o + "script" + u + "document.F=Object" + o + "/script" + u), t.close(), a = t.F; r--;)
          delete a[c][i[r]];
        return a()
      };
    t.exports = Object.create || function (t, n) {
      var e;
      return null !== t ? (f[c] = r(t), e = new f, f[c] = null, e[u] = t) : e = a(), void 0 === n ? e : o(e, n)
    }
  }, function (t, n, e) {
    var r = e(35),
      o = e(16).concat("length", "prototype");
    n.f = Object.getOwnPropertyNames || function (t) {
      return r(t, o)
    }
  }, function (t, n) {
    n.f = Object.getOwnPropertySymbols
  }, function (t, n, e) {
    var r = e(2),
      o = e(3),
      i = e(45)(!1),
      u = e(21)("IE_PROTO");
    t.exports = function (t, n) {
      var e, f = o(t),
        c = 0,
        a = [];
      for (e in f) e != u && r(f, e) && a.push(e);
      for (; n.length > c;) r(f, e = n[c++]) && (~i(a, e) || a.push(e));
      return a
    }
  }, function (t, n, e) {
    t.exports = e(5)
  }, function (t, n, e) {
    var r = e(15);
    t.exports = function (t) {
      return Object(r(t))
    }
  }, function (t, n, e) {
    t.exports = {
      default: e(41),
      __esModule: !0
    }
  }, function (t, n, e) {
    t.exports = {
      default: e(42),
      __esModule: !0
    }
  }, function (t, n, e) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        default: t
      }
    }
    n.__esModule = !0;
    var o = e(39),
      i = r(o),
      u = e(38),
      f = r(u),
      c = "function" == typeof f.default && "symbol" == typeof i.default ? function (t) {
        return typeof t
      } : function (t) {
        return t && "function" == typeof f.default && t.constructor === f.default && t !== f.default.prototype ?
          "symbol" : typeof t
      };
    n.default = "function" == typeof f.default && "symbol" === c(i.default) ? function (t) {
      return "undefined" == typeof t ? "undefined" : c(t)
    } : function (t) {
      return t && "function" == typeof f.default && t.constructor === f.default && t !== f.default.prototype ?
        "symbol" : "undefined" == typeof t ? "undefined" : c(t)
    }
  }, function (t, n, e) {
    e(65), e(63), e(66), e(67), t.exports = e(14).Symbol
  }, function (t, n, e) {
    e(64), e(68), t.exports = e(26).f("iterator")
  }, function (t, n) {
    t.exports = function (t) {
      if ("function" != typeof t) throw TypeError(t + " is not a function!");
      return t
    }
  }, function (t, n) {
    t.exports = function () {}
  }, function (t, n, e) {
    var r = e(3),
      o = e(61),
      i = e(60);
    t.exports = function (t) {
      return function (n, e, u) {
        var f, c = r(n),
          a = o(c.length),
          s = i(u, a);
        if (t && e != e) {
          for (; a > s;)
            if (f = c[s++], f != f) return !0
        } else
          for (; a > s; s++)
            if ((t || s in c) && c[s] === e) return t || s || 0;
        return !t && -1
      }
    }
  }, function (t, n, e) {
    var r = e(43);
    t.exports = function (t, n, e) {
      if (r(t), void 0 === n) return t;
      switch (e) {
        case 1:
          return function (e) {
            return t.call(n, e)
          };
        case 2:
          return function (e, r) {
            return t.call(n, e, r)
          };
        case 3:
          return function (e, r, o) {
            return t.call(n, e, r, o)
          }
      }
      return function () {
        return t.apply(n, arguments)
      }
    }
  }, function (t, n, e) {
    var r = e(9),
      o = e(34),
      i = e(19);
    t.exports = function (t) {
      var n = r(t),
        e = o.f;
      if (e)
        for (var u, f = e(t), c = i.f, a = 0; f.length > a;) c.call(t, u = f[a++]) && n.push(u);
      return n
    }
  }, function (t, n, e) {
    t.exports = e(1).document && document.documentElement
  }, function (t, n, e) {
    var r = e(28);
    t.exports = Object("z").propertyIsEnumerable(0) ? Object : function (t) {
      return "String" == r(t) ? t.split("") : Object(t)
    }
  }, function (t, n, e) {
    var r = e(28);
    t.exports = Array.isArray || function (t) {
      return "Array" == r(t)
    }
  }, function (t, n, e) {
    "use strict";
    var r = e(32),
      o = e(12),
      i = e(20),
      u = {};
    e(5)(u, e(7)("iterator"), function () {
      return this
    }), t.exports = function (t, n, e) {
      t.prototype = r(u, {
        next: o(1, e)
      }), i(t, n + " Iterator")
    }
  }, function (t, n) {
    t.exports = function (t, n) {
      return {
        value: n,
        done: !!t
      }
    }
  }, function (t, n, e) {
    var r = e(9),
      o = e(3);
    t.exports = function (t, n) {
      for (var e, i = o(t), u = r(i), f = u.length, c = 0; f > c;)
        if (i[e = u[c++]] === n) return e
    }
  }, function (t, n, e) {
    var r = e(13)("meta"),
      o = e(11),
      i = e(2),
      u = e(6).f,
      f = 0,
      c = Object.isExtensible || function () {
        return !0
      },
      a = !e(8)(function () {
        return c(Object.preventExtensions({}))
      }),
      s = function (t) {
        u(t, r, {
          value: {
            i: "O" + ++f,
            w: {}
          }
        })
      },
      l = function (t, n) {
        if (!o(t)) return "symbol" == typeof t ? t : ("string" == typeof t ? "S" : "P") + t;
        if (!i(t, r)) {
          if (!c(t)) return "F";
          if (!n) return "E";
          s(t)
        }
        return t[r].i
      },
      p = function (t, n) {
        if (!i(t, r)) {
          if (!c(t)) return !0;
          if (!n) return !1;
          s(t)
        }
        return t[r].w
      },
      d = function (t) {
        return a && v.NEED && c(t) && !i(t, r) && s(t), t
      },
      v = t.exports = {
        KEY: r,
        NEED: !1,
        fastKey: l,
        getWeak: p,
        onFreeze: d
      }
  }, function (t, n, e) {
    var r = e(6),
      o = e(10),
      i = e(9);
    t.exports = e(4) ? Object.defineProperties : function (t, n) {
      o(t);
      for (var e, u = i(n), f = u.length, c = 0; f > c;) r.f(t, e = u[c++], n[e]);
      return t
    }
  }, function (t, n, e) {
    var r = e(19),
      o = e(12),
      i = e(3),
      u = e(24),
      f = e(2),
      c = e(30),
      a = Object.getOwnPropertyDescriptor;
    n.f = e(4) ? a : function (t, n) {
      if (t = i(t), n = u(n, !0), c) try {
        return a(t, n)
      } catch (t) {}
      if (f(t, n)) return o(!r.f.call(t, n), t[n])
    }
  }, function (t, n, e) {
    var r = e(3),
      o = e(33).f,
      i = {}.toString,
      u = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],
      f = function (t) {
        try {
          return o(t)
        } catch (t) {
          return u.slice()
        }
      };
    t.exports.f = function (t) {
      return u && "[object Window]" == i.call(t) ? f(t) : o(r(t))
    }
  }, function (t, n, e) {
    var r = e(2),
      o = e(37),
      i = e(21)("IE_PROTO"),
      u = Object.prototype;
    t.exports = Object.getPrototypeOf || function (t) {
      return t = o(t), r(t, i) ? t[i] : "function" == typeof t.constructor && t instanceof t.constructor ? t.constructor
        .prototype : t instanceof Object ? u : null
    }
  }, function (t, n, e) {
    var r = e(23),
      o = e(15);
    t.exports = function (t) {
      return function (n, e) {
        var i, u, f = String(o(n)),
          c = r(e),
          a = f.length;
        return c < 0 || c >= a ? t ? "" : void 0 : (i = f.charCodeAt(c), i < 55296 || i > 56319 || c + 1 === a ||
          (u = f.charCodeAt(c + 1)) < 56320 || u > 57343 ? t ? f.charAt(c) : i : t ? f.slice(c, c + 2) : (i -
            55296 << 10) + (u - 56320) + 65536)
      }
    }
  }, function (t, n, e) {
    var r = e(23),
      o = Math.max,
      i = Math.min;
    t.exports = function (t, n) {
      return t = r(t), t < 0 ? o(t + n, 0) : i(t, n)
    }
  }, function (t, n, e) {
    var r = e(23),
      o = Math.min;
    t.exports = function (t) {
      return t > 0 ? o(r(t), 9007199254740991) : 0
    }
  }, function (t, n, e) {
    "use strict";
    var r = e(44),
      o = e(52),
      i = e(17),
      u = e(3);
    t.exports = e(31)(Array, "Array", function (t, n) {
      this._t = u(t), this._i = 0, this._k = n
    }, function () {
      var t = this._t,
        n = this._k,
        e = this._i++;
      return !t || e >= t.length ? (this._t = void 0, o(1)) : "keys" == n ? o(0, e) : "values" == n ? o(0, t[e]) :
        o(0, [e, t[e]])
    }, "values"), i.Arguments = i.Array, r("keys"), r("values"), r("entries")
  }, function (t, n) {}, function (t, n, e) {
    "use strict";
    var r = e(59)(!0);
    e(31)(String, "String", function (t) {
      this._t = String(t), this._i = 0
    }, function () {
      var t, n = this._t,
        e = this._i;
      return e >= n.length ? {
        value: void 0,
        done: !0
      } : (t = r(n, e), this._i += t.length, {
        value: t,
        done: !1
      })
    })
  }, function (t, n, e) {
    "use strict";
    var r = e(1),
      o = e(2),
      i = e(4),
      u = e(27),
      f = e(36),
      c = e(54).KEY,
      a = e(8),
      s = e(22),
      l = e(20),
      p = e(13),
      d = e(7),
      v = e(26),
      y = e(25),
      h = e(53),
      b = e(47),
      x = e(50),
      m = e(10),
      g = e(3),
      w = e(24),
      O = e(12),
      S = e(32),
      _ = e(57),
      j = e(56),
      P = e(6),
      E = e(9),
      M = j.f,
      A = P.f,
      T = _.f,
      L = r.Symbol,
      N = r.JSON,
      C = N && N.stringify,
      k = "prototype",
      F = d("_hidden"),
      q = d("toPrimitive"),
      I = {}.propertyIsEnumerable,
      B = s("symbol-registry"),
      D = s("symbols"),
      W = s("op-symbols"),
      H = Object[k],
      K = "function" == typeof L,
      R = r.QObject,
      J = !R || !R[k] || !R[k].findChild,
      U = i && a(function () {
        return 7 != S(A({}, "a", {
          get: function () {
            return A(this, "a", {
              value: 7
            }).a
          }
        })).a
      }) ? function (t, n, e) {
        var r = M(H, n);
        r && delete H[n], A(t, n, e), r && t !== H && A(H, n, r)
      } : A,
      G = function (t) {
        var n = D[t] = S(L[k]);
        return n._k = t, n
      },
      $ = K && "symbol" == typeof L.iterator ? function (t) {
        return "symbol" == typeof t
      } : function (t) {
        return t instanceof L
      },
      z = function (t, n, e) {
        return t === H && z(W, n, e), m(t), n = w(n, !0), m(e), o(D, n) ? (e.enumerable ? (o(t, F) && t[F][n] && (t[
          F][n] = !1), e = S(e, {
          enumerable: O(0, !1)
        })) : (o(t, F) || A(t, F, O(1, {})), t[F][n] = !0), U(t, n, e)) : A(t, n, e)
      },
      Y = function (t, n) {
        m(t);
        for (var e, r = b(n = g(n)), o = 0, i = r.length; i > o;) z(t, e = r[o++], n[e]);
        return t
      },
      Q = function (t, n) {
        return void 0 === n ? S(t) : Y(S(t), n)
      },
      X = function (t) {
        var n = I.call(this, t = w(t, !0));
        return !(this === H && o(D, t) && !o(W, t)) && (!(n || !o(this, t) || !o(D, t) || o(this, F) && this[F][t]) ||
          n)
      },
      V = function (t, n) {
        if (t = g(t), n = w(n, !0), t !== H || !o(D, n) || o(W, n)) {
          var e = M(t, n);
          return !e || !o(D, n) || o(t, F) && t[F][n] || (e.enumerable = !0), e
        }
      },
      Z = function (t) {
        for (var n, e = T(g(t)), r = [], i = 0; e.length > i;) o(D, n = e[i++]) || n == F || n == c || r.push(n);
        return r
      },
      tt = function (t) {
        for (var n, e = t === H, r = T(e ? W : g(t)), i = [], u = 0; r.length > u;) !o(D, n = r[u++]) || e && !o(H,
          n) || i.push(D[n]);
        return i
      };
    K || (L = function () {
      if (this instanceof L) throw TypeError("Symbol is not a constructor!");
      var t = p(arguments.length > 0 ? arguments[0] : void 0),
        n = function (e) {
          this === H && n.call(W, e), o(this, F) && o(this[F], t) && (this[F][t] = !1), U(this, t, O(1, e))
        };
      return i && J && U(H, t, {
        configurable: !0,
        set: n
      }), G(t)
    }, f(L[k], "toString", function () {
      return this._k
    }), j.f = V, P.f = z, e(33).f = _.f = Z, e(19).f = X, e(34).f = tt, i && !e(18) && f(H,
      "propertyIsEnumerable", X, !0), v.f = function (t) {
      return G(d(t))
    }), u(u.G + u.W + u.F * !K, {
      Symbol: L
    });
    for (var nt =
        "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables"
        .split(","), et = 0; nt.length > et;) d(nt[et++]);
    for (var nt = E(d.store), et = 0; nt.length > et;) y(nt[et++]);
    u(u.S + u.F * !K, "Symbol", {
      for: function (t) {
        return o(B, t += "") ? B[t] : B[t] = L(t)
      },
      keyFor: function (t) {
        if ($(t)) return h(B, t);
        throw TypeError(t + " is not a symbol!")
      },
      useSetter: function () {
        J = !0
      },
      useSimple: function () {
        J = !1
      }
    }), u(u.S + u.F * !K, "Object", {
      create: Q,
      defineProperty: z,
      defineProperties: Y,
      getOwnPropertyDescriptor: V,
      getOwnPropertyNames: Z,
      getOwnPropertySymbols: tt
    }), N && u(u.S + u.F * (!K || a(function () {
      var t = L();
      return "[null]" != C([t]) || "{}" != C({
        a: t
      }) || "{}" != C(Object(t))
    })), "JSON", {
      stringify: function (t) {
        if (void 0 !== t && !$(t)) {
          for (var n, e, r = [t], o = 1; arguments.length > o;) r.push(arguments[o++]);
          return n = r[1], "function" == typeof n && (e = n), !e && x(n) || (n = function (t, n) {
            if (e && (n = e.call(this, t, n)), !$(n)) return n
          }), r[1] = n, C.apply(N, r)
        }
      }
    }), L[k][q] || e(5)(L[k], q, L[k].valueOf), l(L, "Symbol"), l(Math, "Math", !0), l(r.JSON, "JSON", !0)
  }, function (t, n, e) {
    e(25)("asyncIterator")
  }, function (t, n, e) {
    e(25)("observable")
  }, function (t, n, e) {
    e(62);
    for (var r = e(1), o = e(5), i = e(17), u = e(7)("toStringTag"), f = ["NodeList", "DOMTokenList", "MediaList",
        "StyleSheetList", "CSSRuleList"
      ], c = 0; c < 5; c++) {
      var a = f[c],
        s = r[a],
        l = s && s.prototype;
      l && !l[u] && o(l, u, a), i[a] = i.Array
    }
  }, function (t, n) {
    "use strict";
    var e = {
      versions: function () {
        var t = window.navigator.userAgent;
        return {
          trident: t.indexOf("Trident") > -1,
          presto: t.indexOf("Presto") > -1,
          webKit: t.indexOf("AppleWebKit") > -1,
          gecko: t.indexOf("Gecko") > -1 && t.indexOf("KHTML") == -1,
          mobile: !!t.match(/AppleWebKit.*Mobile.*/),
          ios: !!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
          android: t.indexOf("Android") > -1 || t.indexOf("Linux") > -1,
          iPhone: t.indexOf("iPhone") > -1 || t.indexOf("Mac") > -1,
          iPad: t.indexOf("iPad") > -1,
          webApp: t.indexOf("Safari") == -1,
          weixin: t.indexOf("MicroMessenger") == -1
        }
      }()
    };
    t.exports = e
  }, function (t, n, e) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        default: t
      }
    }
    var o = e(40),
      i = r(o),
      u = function () {
        function t(t, n, e) {
          return n || e ? String.fromCharCode(n || e) : o[t] || t
        }

        function n(t) {
          return l[t]
        }
        var e = /&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,
          r = /['<> "&]/g,
          o = {
            "&quot;": '"',
            "&lt;": "<",
            "&gt;": ">",
            "&amp;": "&",
            "&nbsp;": " "
          },
          f = /\u00a0/g,
          c = /<br\s*\/?>/gi,
          a = /\r?\n/g,
          s = /\s/g,
          l = {};
        for (var p in o) l[o[p]] = p;
        return o["&apos;"] = "'", l["'"] = "&#39;", {
          encode: function (t) {
            return t ? ("" + t).replace(r, n).replace(a, "<br/>").replace(s, "&nbsp;") : ""
          },
          decode: function (n) {
            return n ? ("" + n).replace(c, "\n").replace(e, t).replace(f, " ") : ""
          },
          encodeBase16: function (t) {
            if (!t) return t;
            t += "";
            for (var n = [], e = 0, r = t.length; r > e; e++) n.push(t.charCodeAt(e).toString(16).toUpperCase());
            return n.join("")
          },
          encodeBase16forJSON: function (t) {
            if (!t) return t;
            t = t.replace(/[\u4E00-\u9FBF]/gi, function (t) {
              return escape(t).replace("%u", "\\u")
            });
            for (var n = [], e = 0, r = t.length; r > e; e++) n.push(t.charCodeAt(e).toString(16).toUpperCase());
            return n.join("")
          },
          decodeBase16: function (t) {
            if (!t) return t;
            t += "";
            for (var n = [], e = 0, r = t.length; r > e; e += 2) n.push(String.fromCharCode("0x" + t.slice(e, e +
              2)));
            return n.join("")
          },
          encodeObject: function (t) {
            if (t instanceof Array)
              for (var n = 0, e = t.length; e > n; n++) t[n] = u.encodeObject(t[n]);
            else if ("object" == ("undefined" == typeof t ? "undefined" : (0, i.default)(t)))
              for (var r in t) t[r] = u.encodeObject(t[r]);
            else if ("string" == typeof t) return u.encode(t);
            return t
          },
          loadScript: function (t) {
            var n = document.createElement("script");
            document.getElementsByTagName("body")[0].appendChild(n), n.setAttribute("src", t)
          },
          addLoadEvent: function (t) {
            var n = window.onload;
            "function" != typeof window.onload ? window.onload = t : window.onload = function () {
              n(), t()
            }
          }
        }
      }();
    t.exports = u
  }, function (t, n) {
    function e(t, n) {
      t.classList ? t.classList.add(n) : t.className += " " + n
    }
    t.exports = e
  }, function (t, n) {
    function e(t, n) {
      if (t.classList) t.classList.remove(n);
      else {
        var e = new RegExp("(^|\\b)" + n.split(" ").join("|") + "(\\b|$)", "gi");
        t.className = t.className.replace(e, " ")
      }
    }
    t.exports = e
  }, , , function (t, n) {
    "use strict";

    function e() {
      var t = document.querySelector("#page-nav");
      if (t && !document.querySelector("#page-nav .extend.prev") && (t.innerHTML =
          '<a class="extend prev disabled" rel="prev">&laquo; Prev</a>' + t.innerHTML), t && !document.querySelector(
          "#page-nav .extend.next") && (t.innerHTML = t.innerHTML +
          '<a class="extend next disabled" rel="next">Next &raquo;</a>'), yiliaConfig && yiliaConfig.open_in_new) {
        var n = document.querySelectorAll(".article-entry a:not(.article-more-a)");
        n.forEach(function (t) {
          t.setAttribute("target", "_blank")
        })
      }
      var e = document.querySelector("#js-aboutme");
      e && 0 !== e.length && (e.innerHTML = e.innerText)
    }
    t.exports = {
      init: e
    }
  }, , , , , , , , , function (t, n) {
    function e(t, n) {
      if ("string" == typeof n) return t.insertAdjacentHTML("afterend", n);
      var e = t.nextSibling;
      return e ? t.parentNode.insertBefore(n, e) : t.parentNode.appendChild(n)
    }
    t.exports = e
  }])

</script>
<script src="/./main.4a524f.js"></script>
<script>
  ! function () {
    var e = function (e) {
      var t = document.createElement("script");
      document.getElementsByTagName("body")[0].appendChild(t), t.setAttribute("src", e)
    };
    e("/slider.885efe.js")
  }()

</script>
<script src="http://ouz1r1b1f.bkt.clouddn.com/blog/jshighlight.pack.js"></script>



        
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 50%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
        
      
      <li style="width: 50%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">css</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">js</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">h5</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">ajax</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">vue</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">Vue</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">gulp</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">jq</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">web</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">插件</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">html</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">小知识</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">vsc</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">移动端App</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">移动端</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">工作</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">面试</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">虾莫&lt;br&gt;喜欢骑行、登山、越野&lt;br&gt;&lt;br&gt;选择与被选择&lt;br/&gt;淘汰或被淘汰&lt;br/&gt;这个世界的法则&lt;br/&gt;不管如何&lt;br&gt;明白路在脚下，就即刻启程</div>
  	  	
    	</section>
    
  </div>
  
</div>
          <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
    </div>
  </body>

  </html>
